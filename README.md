ğŸš€ Facebook Video Downloader Telegram Bot (Cloudflare Worker)ğŸ”¥ C D H Corporation Â©<p align="center">Â  <a href="https://t.me/chamoddeshan">Â  Â  <img src="https://img.shields.io/badge/Developer-@chamoddeshan-blue.svg?style=for-the-badge&logo=telegram" alt="Developer Telegram">Â  </a>Â  <a href="https://developers.cloudflare.com/workers/">Â  Â  <img src="https://img.shields.io/badge/Platform-Cloudflare%20Workers-orange.svg?style=for-the-badge&logo=cloudflare" alt="Cloudflare Workers">Â  </a>Â  <a href="https://www.javascript.com/">Â  Â  <img src="https://img.shields.io/badge/Language-JavaScript-F7DF1E.svg?style=for-the-badge&logo=javascript" alt="JavaScript">Â  </a></p>ğŸŒŸ Project OverviewThis is a high-performance Telegram Bot running entirely on Cloudflare Workers. It allows users to seamlessly download Public Facebook Videos simply by sharing the link. The architecture is designed for speed and reliability, leveraging the power of the serverless edge and the Telegram API for efficient file handling and user engagement.âœ¨ Key FeaturesğŸ”— Facebook Video Download: Accepts any public Facebook video URL (including fb.watch and fb.me) and sends the video directly to the user in Telegram.ğŸ–¼ï¸ Rich Metadata & Caption: Videos are accompanied by an attractive caption containing complete metadata, including the Title, Uploader, Duration, View Count, and Upload Date.â³ Real-Time Progress: Displays a simulated Progress Bar to the user while the video is being processed, identified, and uploaded, improving user experience by providing status updates.âš ï¸ Large File Handling: For files exceeding 50MB (configurable), the bot intelligently sends a Direct Download Link instead of attempting to upload the file to Telegram, preventing potential API or Worker timeouts.ğŸ‘‘ Admin Panel (Bot Owner Only): Accessible via the /start command.ğŸ“Š Users Count: View the total number of users who have interacted with the bot (requires Cloudflare KV).ğŸ“£ Broadcast: Send a message (Text, Photo, or Video) to all registered bot users for announcements or updates.âš™ï¸ Performance & Efficiency: Built on Cloudflare Workers' serverless architecture, ensuring low latency, high scalability, and robust performance.ğŸ“ Code StructureThe project is modularized into five distinct files for clear separation of concerns, with index.js acting as the main entry point for the Cloudflare Worker.FileResponsibilityDescriptionindex.jsEntry Point / RouterContains the fetch function of the Cloudflare Worker. It initiates all core logic and handles incoming Telegram updates (message or callback_query).handlers.jsBot Logic & API InteractionHouses the WorkerHandlers class. Includes all Telegram API methods (e.g., sendMessage, sendVideo), user database (KV) management, and the Broadcast mechanism.api.jsExternal Data FetchingContains functions (getApiMetadata, scrapeVideoLinkAndThumbnail) necessary for retrieving video metadata and scraping the final working download link from Facebook.helpers.jsFormatting & UtilitiesContains small utility functions like text formatting (htmlBold) and the logic for duration formatting (formatDuration, formatCaption).config.jsConfigurationsStores all essential constants, including BOT_TOKEN, OWNER_ID, API_URL, MAX_FILE_SIZE_BYTES, and PROGRESS_STATES arrays.ğŸ› ï¸ Setup and DeploymentStep 1: PrerequisitesTelegram Bot Token: Obtain your Bot Token from BotFather on Telegram.Cloudflare Account: A Cloudflare account is required, and the Wrangler CLI should be installed for deployment.Cloudflare KV (Recommended): Set up a Cloudflare KV Namespace to store user IDs for the user count and broadcast features.Step 2: Configuration UpdateOpen the config.js file and update the following placeholders with your actual credentials:// config.js

const BOT_TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN_HERE';Â 
const OWNER_ID = 'YOUR_TELEGRAM_USER_ID_HERE'; // Must be a string (e.g., '123456789')
const API_URL = "[https://fdown.isuru.eu.org/info](https://fdown.isuru.eu.org/info)"; // Do NOT change this URL
const MAX_FILE_SIZE_BYTES = 50 * 1024 * 1024; // Default: 50MB

// ... other constants
Step 3: DeploymentUse the Cloudflare Wrangler CLI to deploy the worker:wrangler publish
Step 4: Webhook SetupAfter deployment, set your Telegram Webhook to point to your new Cloudflare Worker URL:[https://api.telegram.org/bot](https://api.telegram.org/bot)<YOUR_BOT_TOKEN_HERE>/setWebhook?url=<YOUR_WORKER_URL_HERE>
âš ï¸ NotesEnsure that the KV Namespace binding in your wrangler.toml file matches the binding used in handlers.js (this.env.USER_DATABASE).The bot only works with Public Facebook video links. Private or restricted videos will fail.The API_URL is an external service used to efficiently fetch video metadata and should generally not be modified.
